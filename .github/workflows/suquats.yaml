name: Squat Challenge

on:
  schedule:
    # JST å¹³æ—¥ 09:00,12:00,15:00,18:00  â†’ UTC å¹³æ—¥ 00:00,03:00,06:00,09:00
    - cron: "0 0,3,6,9 * * 1-5"
    # JST å¹³æ—¥ 09:45,12:45,15:45 â†’ UTC å¹³æ—¥ 00:45,03:45,06:45
    - cron: "45 0,3,6 * * 1-5"
    # JST å¹³æ—¥ 10:30,13:30,16:30 â†’ UTC å¹³æ—¥ 01:30,04:30,07:30
    - cron: "30 1,4,7 * * 1-5"
    # JST å¹³æ—¥ 11:15,14:15,17:15 â†’ UTC å¹³æ—¥ 02:15,05:15,08:15
    - cron: "15 2,5,8 * * 1-5"

  workflow_dispatch: {}

jobs:
  post:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout repository
        uses: actions/checkout@v4
      
      - name: Post to Slack
        env:
          SLACK_WEBHOOK_URL: ${{ secrets.SLACK_WEBHOOK_URL }}
        run: |
          set -euo pipefail
          if [ -z "${SLACK_WEBHOOK_URL}" ]; then
            echo "Error: SLACK_WEBHOOK_URL is not set"
            exit 1
          fi
          payload='{"text":"ðŸ”¥ Squat Challenge\n\n10 reps"}'
          curl -sS -X POST \
            -H 'Content-type: application/json' \
            --data "${payload}" \
            "${SLACK_WEBHOOK_URL}"
